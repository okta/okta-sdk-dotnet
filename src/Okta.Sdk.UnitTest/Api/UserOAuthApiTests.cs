/*
 * Okta API
 *
 * Allows customers to easily access the Okta API
 *
 * The version of the OpenAPI document: 5.1.0
 * Contact: devex-public@okta.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

using System.Net;
using System.Threading.Tasks;
using FluentAssertions;
using Okta.Sdk.Api;
using Okta.Sdk.Client;
using Okta.Sdk.Model;
using Okta.Sdk.UnitTest.Internal;
using Xunit;

namespace Okta.Sdk.UnitTest.Api
{
    /// <summary>
    ///  Class for testing UserOAuthApi
    /// </summary>
    public class UserOAuthApiTests
    {
        #region GetRefreshTokenForUserAndClient Tests

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_ReturnsToken()
        {
            // Arrange
            var userId = "user-123";
            var clientId = "client-456";
            var tokenId = "token-789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""ACTIVE"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @""",
                ""scopes"": [""openid"", ""profile""],
                ""_links"": {
                    ""self"": {
                        ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/" + tokenId + @"""
                    },
                    ""revoke"": {
                        ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/" + tokenId + @"""
                    }
                }
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var token = await userOAuthApi.GetRefreshTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            token.Should().NotBeNull();
            token.Id.Should().Be(tokenId);
            token.Status.Should().Be(GrantOrTokenStatus.ACTIVE);
            token.ClientId.Should().Be(clientId);
            token.Issuer.Should().Be("https://test.okta.com/oauth2/default");

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_WithExpand_IncludesExpandParameter()
        {
            // Arrange
            var userId = "user-expand-123";
            var clientId = "client-expand-456";
            var tokenId = "token-expand-789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""ACTIVE"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @""",
                ""scopes"": [""openid"", ""profile""],
                ""_embedded"": {
                    ""scopes"": [
                        {
                            ""id"": ""openid"",
                            ""name"": ""openid""
                        }
                    ]
                },
                ""_links"": {
                    ""self"": {
                        ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/" + tokenId + @"""
                    }
                }
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var token = await userOAuthApi.GetRefreshTokenForUserAndClientAsync(userId, clientId, tokenId, "scope");

            // Assert
            token.Should().NotBeNull();
            token.Id.Should().Be(tokenId);

            mockClient.ReceivedQueryParams.Should().NotBeNull();
        }

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_WithHttpInfo_ReturnsCorrectResponse()
        {
            // Arrange
            var userId = "user-info-123";
            var clientId = "client-info-456";
            var tokenId = "token-info-789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""ACTIVE"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @""",
                ""scopes"": [""openid""]
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var response = await userOAuthApi.GetRefreshTokenForUserAndClientWithHttpInfoAsync(userId, clientId, tokenId);

            // Assert
            response.Should().NotBeNull();
            response.Data.Should().NotBeNull();
            response.Data.Id.Should().Be(tokenId);

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-endpoint-123";
            var clientId = "client-endpoint-456";
            var tokenId = "token-endpoint-789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""ACTIVE"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @"""
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.GetRefreshTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        #endregion

        #region ListRefreshTokensForUserAndClient Tests

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_ReturnsTokenList()
        {
            // Arrange
            var userId = "user-list-123";
            var clientId = "client-list-456";

            var responseJson = @"[
                {
                    ""id"": ""token-1"",
                    ""status"": ""ACTIVE"",
                    ""created"": ""2025-10-06T12:00:00.000Z"",
                    ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                    ""issuer"": ""https://test.okta.com/oauth2/default"",
                    ""clientId"": """ + clientId + @""",
                    ""userId"": """ + userId + @""",
                    ""scopes"": [""openid""],
                    ""_links"": {
                        ""self"": {
                            ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/token-1""
                        }
                    }
                },
                {
                    ""id"": ""token-2"",
                    ""status"": ""ACTIVE"",
                    ""created"": ""2025-10-06T13:00:00.000Z"",
                    ""expiresAt"": ""2025-10-07T13:00:00.000Z"",
                    ""issuer"": ""https://test.okta.com/oauth2/default"",
                    ""clientId"": """ + clientId + @""",
                    ""userId"": """ + userId + @""",
                    ""scopes"": [""profile""],
                    ""_links"": {
                        ""self"": {
                            ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/token-2""
                        }
                    }
                }
            ]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId);

            // Assert
            tokens.Should().NotBeNull();
            tokens.Data.Should().HaveCount(2);
            tokens.Data[0].Id.Should().Be("token-1");
            tokens.Data[0].ClientId.Should().Be(clientId);
            tokens.Data[1].Id.Should().Be("token-2");
            tokens.Data[1].ClientId.Should().Be(clientId);

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
        }

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_WithExpand_IncludesExpandParameter()
        {
            // Arrange
            var userId = "user-expand-list-123";
            var clientId = "client-expand-list-456";

            var responseJson = @"[
                {
                    ""id"": ""token-expand-1"",
                    ""status"": ""ACTIVE"",
                    ""created"": ""2025-10-06T12:00:00.000Z"",
                    ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                    ""issuer"": ""https://test.okta.com/oauth2/default"",
                    ""clientId"": """ + clientId + @""",
                    ""userId"": """ + userId + @""",
                    ""scopes"": [""openid""],
                    ""_embedded"": {
                        ""scopes"": [
                            {
                                ""id"": ""openid"",
                                ""name"": ""openid""
                            }
                        ]
                    }
                }
            ]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId, expand: "scope");

            // Assert
            tokens.Should().NotBeNull();
            tokens.Data.Should().HaveCount(1);

            mockClient.ReceivedQueryParams.Should().NotBeNull();
        }

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_WithPagination_IncludesPaginationParameters()
        {
            // Arrange
            var userId = "user-pagination-123";
            var clientId = "client-pagination-456";
            var limit = 10;
            var after = "cursor-123";

            var responseJson = @"[]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId, limit: limit, after: after);

            // Assert
            tokens.Should().NotBeNull();
            tokens.Data.Should().BeEmpty();

            mockClient.ReceivedQueryParams.Should().NotBeNull();
        }

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_EmptyResponse_ReturnsEmptyList()
        {
            // Arrange
            var userId = "user-empty-123";
            var clientId = "client-empty-456";
            var responseJson = @"[]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId);

            // Assert
            tokens.Should().NotBeNull();
            tokens.Data.Should().BeEmpty();

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
        }

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-endpoint-list-123";
            var clientId = "client-endpoint-list-456";
            var responseJson = @"[]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId);

            // Assert
            tokens.Should().NotBeNull();
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
        }

        #endregion

        #region RevokeTokenForUserAndClient Tests

        [Fact]
        public async Task RevokeTokenForUserAndClient_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-revoke-123";
            var clientId = "client-revoke-456";
            var tokenId = "token-revoke-789";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.RevokeTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        [Fact]
        public async Task RevokeTokenForUserAndClient_WithHttpInfo_ReturnsCorrectResponse()
        {
            // Arrange
            var userId = "user-revoke-info-123";
            var clientId = "client-revoke-info-456";
            var tokenId = "token-revoke-info-789";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var response = await userOAuthApi.RevokeTokenForUserAndClientWithHttpInfoAsync(userId, clientId, tokenId);

            // Assert
            response.Should().NotBeNull();
            response.StatusCode.Should().Be(HttpStatusCode.NoContent);

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        [Fact]
        public async Task RevokeTokenForUserAndClient_MultipleTokens_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-multi-revoke-123";
            var clientId = "client-multi-revoke-456";
            var tokenId1 = "token-1";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.RevokeTokenForUserAndClientAsync(userId, clientId, tokenId1);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId1);
        }

        #endregion

        #region RevokeTokensForUserAndClient Tests

        [Fact]
        public async Task RevokeTokensForUserAndClient_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-revoke-all-123";
            var clientId = "client-revoke-all-456";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.RevokeTokensForUserAndClientAsync(userId, clientId);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
        }

        [Fact]
        public async Task RevokeTokensForUserAndClient_WithHttpInfo_ReturnsCorrectResponse()
        {
            // Arrange
            var userId = "user-revoke-all-info-123";
            var clientId = "client-revoke-all-info-456";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var response = await userOAuthApi.RevokeTokensForUserAndClientWithHttpInfoAsync(userId, clientId);

            // Assert
            response.Should().NotBeNull();
            response.StatusCode.Should().Be(HttpStatusCode.NoContent);

            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId);
        }

        [Fact]
        public async Task RevokeTokensForUserAndClient_MultipleClients_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-multi-client-123";
            var clientId1 = "client-1";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.RevokeTokensForUserAndClientAsync(userId, clientId1);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens");
            mockClient.ReceivedPathParams.Should().ContainKey("clientId");
            mockClient.ReceivedPathParams["clientId"].Should().Contain(clientId1);
        }

        #endregion

        #region Additional Edge Case Tests

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_WithRevokedStatus_ReturnsRevokedToken()
        {
            // Arrange
            var userId = "user-revoked-123";
            var clientId = "client-revoked-456";
            var tokenId = "token-revoked-789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""REVOKED"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @""",
                ""scopes"": [""openid""],
                ""_links"": {
                    ""self"": {
                        ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/" + tokenId + @"""
                    }
                }
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var token = await userOAuthApi.GetRefreshTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            token.Should().NotBeNull();
            token.Status.Should().Be(GrantOrTokenStatus.REVOKED);
            token.Id.Should().Be(tokenId);
        }

        [Fact]
        public async Task ListRefreshTokensForUserAndClient_WithMultipleScopes_ReturnsCorrectStructure()
        {
            // Arrange
            var userId = "user-scopes-123";
            var clientId = "client-scopes-456";

            var responseJson = @"[
                {
                    ""id"": ""token-scopes-1"",
                    ""status"": ""ACTIVE"",
                    ""created"": ""2025-10-06T12:00:00.000Z"",
                    ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                    ""issuer"": ""https://test.okta.com/oauth2/default"",
                    ""clientId"": """ + clientId + @""",
                    ""userId"": """ + userId + @""",
                    ""scopes"": [""openid"", ""profile"", ""email""],
                    ""_links"": {
                        ""self"": {
                            ""href"": ""https://test.okta.com/api/v1/users/" + userId + @"/clients/" + clientId + @"/tokens/token-scopes-1""
                        }
                    }
                }
            ]";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            var tokens = await userOAuthApi.ListRefreshTokensForUserAndClientWithHttpInfoAsync(userId, clientId);

            // Assert
            tokens.Should().NotBeNull();
            tokens.Data.Should().HaveCount(1);
            tokens.Data[0].Id.Should().Be("token-scopes-1");
            tokens.Data[0].ClientId.Should().Be(clientId);
        }

        [Fact]
        public async Task GetRefreshTokenForUserAndClient_WithSpecialCharacters_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-special@example.com";
            var clientId = "client-special-456";
            var tokenId = "token-special_789";

            var responseJson = @"{
                ""id"": """ + tokenId + @""",
                ""status"": ""ACTIVE"",
                ""created"": ""2025-10-06T12:00:00.000Z"",
                ""expiresAt"": ""2025-10-07T12:00:00.000Z"",
                ""issuer"": ""https://test.okta.com/oauth2/default"",
                ""clientId"": """ + clientId + @""",
                ""userId"": """ + userId + @"""
            }";

            var mockClient = new MockAsyncClient(responseJson);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.GetRefreshTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("userId");
            mockClient.ReceivedPathParams["userId"].Should().Contain(userId);
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        [Fact]
        public async Task RevokeTokenForUserAndClient_NonExistentToken_CallsCorrectEndpoint()
        {
            // Arrange
            var userId = "user-nonexistent-123";
            var clientId = "client-nonexistent-456";
            var tokenId = "nonexistent-token";

            var mockClient = new MockAsyncClient("", HttpStatusCode.NoContent);
            var userOAuthApi = new UserOAuthApi(mockClient, new Configuration { BasePath = "https://test.okta.com" });

            // Act
            await userOAuthApi.RevokeTokenForUserAndClientAsync(userId, clientId, tokenId);

            // Assert
            mockClient.ReceivedPath.Should().StartWith("/api/v1/users/{userId}/clients/{clientId}/tokens/{tokenId}");
            mockClient.ReceivedPathParams.Should().ContainKey("tokenId");
            mockClient.ReceivedPathParams["tokenId"].Should().Contain(tokenId);
        }

        #endregion
    }
}
